
â¸»

ã¾ãšä½œã‚‹ã®ã¯ æœ€å°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ + è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã® Java ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

ä»¥ä¸‹ã®æ§‹æˆã‚’ä½œã£ã¦ã„ãï¼š

java-gold-study/
  src/
    module-info.java
    app/
      Main.java
    util/
      MathUtil.java

ã“ã®æ§‹æˆã§å­¦ã¹ã‚‹ã“ã¨ï¼š
	â€¢	package app; / package util; ã®æ„å‘³
	â€¢	import util.MathUtil;
	â€¢	Java ã®ã€Œéšå±¤ = ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã®ãƒ«ãƒ¼ãƒ«
	â€¢	javac -d out --module-source-path src ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ–¹æ³•
	â€¢	Java 9+ ã® module systemï¼ˆmodule-info.javaï¼‰ ã®æœ€å°æ§‹æˆ
	â€¢	ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã®å®Ÿè¡Œ java -p out -m app/app.Main

ã“ã‚Œã¯ è©¦é¨“å‡ºã‚‹ã€ã‹ã¤ IDE ä¸ä½¿ç”¨ã§æœ€ã‚‚é‡è¦ãªåŸºç¤ã€‚

â¸»

Step 1: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‹

mkdir -p java-gold-study/src/app
mkdir -p java-gold-study/src/util
mkdir -p java-gold-study/out


â¸»

Step 2: module-info.java ã‚’æ›¸ãï¼ˆJava 9+ ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŸºç¤ï¼‰

src/module-info.java

module app {
    // util ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã„ãŸã„ã®ã§ requires ã‚’æ›¸ã
    requires util;
}

module util {} ã®ã‚ˆã†ãªåˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ãŒã€
æœ€åˆã¯ 1ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã¹ã¦ã¾ã¨ã‚ã‚‹ ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã™ã‚‹ã€‚

ğŸ‘‰ ã¤ã¾ã‚Šä»Šå›ã¯ module = app ã ã‘ã«å…¨éƒ¨å…¥ã‚Œã‚‹ã€‚

ã‚ˆã£ã¦ã€æœ€å°æ§‹æˆã§æ­£ã—ãã¯ã“ã†ï¼š

module app {
    // exports: å¤–éƒ¨ã«å…¬é–‹ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆä»Šå›ã¯å…¨éƒ¨ OKï¼‰
    exports util;
    exports app;
}

ã“ã‚ŒãŒ Java Gold ã§å¿…é ˆã® module-info ã®åŸºç¤ã€‚

â¸»

Step 3: util ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã

src/util/MathUtil.java

package util;

// ç°¡å˜ãªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹
public class MathUtil {

    // 2ã¤ã®æ•°ã®å¹³å‡ã‚’è¿”ã™ãƒ¡ã‚½ãƒƒãƒ‰
    public static double average(double a, double b) {
        return (a + b) / 2.0;
    }
}

å­¦ã¹ã‚‹ã“ã¨ï¼š
	â€¢	package util; â†’ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª util/ ã¨ä¸€è‡´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
	â€¢	public class MathUtil â†’ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
	â€¢	public static â†’ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä¸è¦ã§å‘¼ã³å‡ºã—å¯èƒ½

â¸»

Step 4: app ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã

src/app/Main.java

package app;

// utilãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®MathUtilã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import util.MathUtil;

public class Main {

    public static void main(String[] args) {

        double a = 10.0;
        double b = 20.0;

        // util ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™
        double avg = MathUtil.average(a, b);

        System.out.println("å¹³å‡å€¤: " + avg);
    }
}

å­¦ã¹ã‚‹ã“ã¨ï¼š
	â€¢	import util.MathUtil;
	â€¢	package app;
	â€¢	MathUtil.average() ã®å‘¼ã³å‡ºã—

â¸»

Step 5: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ï¼ˆmodule å¯¾å¿œã®æ­£ã—ã„ javac ã‚³ãƒãƒ³ãƒ‰ï¼‰

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®æ­£ã—ã„å½¢ï¼š

cd java-gold-study

javac -d out $(find src -name "*.java")

ã‚‚ã—ãã¯ã‚‚ã£ã¨ â€œJava ã£ã½ã„â€ æ­£å¼æ‰‹é †ï¼š

javac --module-source-path src -d out $(find src -name "*.java")

ã“ã‚Œã§ï¼š
	â€¢	out/app/app/Main.class
	â€¢	out/app/util/MathUtil.class
	â€¢	out/module-info.class

ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚

â¸»

Step 6: å®Ÿè¡Œï¼ˆmodule-aware ã® java ã‚³ãƒãƒ³ãƒ‰ï¼‰

java -p out -m app/app.Main

æ„å‘³ï¼š
	â€¢	-p out = ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ã‚¹ (module path)
	â€¢	-m app/app.Main =
ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å / èµ·å‹•ã™ã‚‹ã‚¯ãƒ©ã‚¹ã® FQCNï¼ˆå®Œå…¨ä¿®é£¾åï¼‰

å‡ºåŠ›ï¼š

å¹³å‡å€¤: 15.0


â¸»

ã“ã“ã§å¾—ã‚‰ã‚Œã‚‹å­¦ã³ï¼ˆã‚ã¡ã‚ƒé‡è¦ï¼‰

âœ” ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆãƒ«ãƒ¼ãƒ«

src/util/MathUtil.java â†’ package util;
src/app/Main.java â†’ package app;

âœ” import ã®ä»•çµ„ã¿

import util.MathUtil;

âœ” module-info.java ã®è¶…åŸºæœ¬
	â€¢	ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é–¢ä¿‚ãªãã€Œè«–ç†åã€
	â€¢	exports app; ã‚’æ›¸ã‹ãªã„ã¨å¤–éƒ¨ã‹ã‚‰è¦‹ãˆãªã„ï¼ˆè©¦é¨“ã§å‡ºã‚‹ï¼‰

âœ” javac ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ“ãƒ«ãƒ‰
	â€¢	--module-source-path ãŒã‚­ãƒ¢

âœ” java ã®èµ·å‹•æ–¹æ³•
	â€¢	Java 9 ä»¥é™ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã®ä»•çµ„ã¿

â¸»